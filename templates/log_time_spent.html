<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

   <!-- Include the CSS file -->
   <link rel="stylesheet" href="{{ url_for('static', filename='css/log_time_page.css') }}">
   <script src="{{ url_for('static', filename='status.js') }}"></script>
   <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
   <!-- JavaScript -->
   <script src="{{ url_for('static', filename='sprint_backlog.js') }}"></script>
   <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>
   <!--font awesome-->
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

</head>

<body>

    <div class="logTimeContainer">

        <a href="javascript:history.back()" class="arrow-button">
            <i class="fa-solid fa-arrow-left" style="color: #ffffff; font-size: 0.8em;"></i> <!--Arrow icon from Font Awesome-->
        </a>

        <div>
            <div class="header">
                <label>Time Spent</label><br>
            </div>

            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    <ul class="flash-messages">
                        {% for category, message in messages %}
                            <li class="{{ category }}">{{ message }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            {% endwith %}

            <form action="/sprint/{{sprint_id}}/task/{{task_id}}/log-time" method="POST" class="logTimeForm"> 
    
                <div>
                    <label for="date" class="formLabel">Date:</label><br>
                    <input type="date" id="date" name="date" class="formDate" min="{{ created_date }}" required><br><br>
                </div>
    
                <div>
                    <label for="start_time" class="formLabel">Start Time:</label><br>
                    <input type="time" id="start_time" name="start_time" class="formDate" required><br><br>
                </div>
                    
                <div>
                    <label for="end_time" class="formLabel">End Time:</label><br>
                    <input type="time" id="end_time" name="end_time" class="formDate" required><br><br>
                </div>
                        
                <div class="logButtonDiv">
                    <!--Add in the save button to let the user to save the task into product backlog-->
                    <input type="submit" value="Log" class="logButton" required><br><br>
                </div>
            </form>

            <div id='chart' class="effortGraphContainer"></div>
        </div>
        
    </div>
    
    <script src='https://cdn.plot.ly/plotly-latest.min.js'></script>
    <script type='text/javascript'>
    var graphs = {{graphJSON | safe}};
    Plotly.plot('chart',graphs,{});
    </script>

</body>